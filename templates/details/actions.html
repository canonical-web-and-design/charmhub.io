{% set current_tab = "actions" %}

{% extends '/details/details_layout.html' %}

{% block details_content %}
<div class="row is-wide p-details-tab__content">
  {% if package.store_front.actions %}
    <div class="row is-wide">
      <div class="col-3 has-space--right">
        <div class="p-side-navigation">
          <ul class="p-side-navigation__list">
            {% for action in package.store_front.actions %}
              <li class="p-side-navigation__item">
                <a href="#{{ action }}" class="p-side-navigation__link" role="tab" aria-controls="{{ action }}" {% if loop.index == 1 %}aria-current="page"{% endif %}>
                  {{ action }}
                </a>
              </li>
            {% endfor %}
          </ul>
        </div>
      </div>
      <div class="col-9 col-large-6">
        <ul class="p-list--divided has-separator-centered">
          {% for action, action_data in package.store_front.actions.items() %}
            <li class="p-list__item" style="margin-bottom: 1rem;" id="{{ action }}">
              <p class="p-heading--4">{{ action }}</p>
              {% if action_data.description %}
                <p class="u-no-padding--top">{{ action_data.description }}</p>
              {% endif %}
              {% if action_data.params %}
                <dl>
                  <dt>Params</dt>
                  <dl>
                    <ul class="p-list action-list" style="margin-left: 1rem;">
                      {% for param, param_data in action_data.params.items() %}
                      <li>
                        <p>
                          <span class="vertical-separator">{{ param }}</span>
                          <span class="u-text--muted">{{ param_data.type }}</span>
                        </p>
                        <p class="u-no-padding--top">{{ param_data.description }}</p>
                      </li>
                      {% endfor %}
                    </ul>
                  </dl>
                </dl>
                {% if action_data.required %}
                  <tr>
                    <td class="u-align--right u-text--muted" style="width: 25%;">Required</td>
                    <td>
                      <p class="u-no-padding--top u-no-margin--bottom">
                        {% for item in action_data.required %}
                          {{ item }}{% if not loop.last %},{% endif %}
                        {% endfor %}
                      </p>
                    </td>
                  </tr>
                {% endif %}
              {% endif %}
            </li>
          {% endfor %}
        </ul>
      </div>
    </div>
  {% else %}
    <div class="u-fixed-width u-equal-height is-wide">
      <div class="charm-empty-docs-icon u-vertically-center">
        <img src="https://assets.ubuntu.com/v1/3234f995-Generic_chamhub_NoDocs.svg" alt="" width="121" height="121">
      </div>
      <div class="col-9 charm-empty-docs-content">
        <h4>No actions have been added yet</h4>
        <p>Actions are executables associated with a charm that may be invoked by the user.</p>
        <p class="u-no-margin--bottom"><a class="p-button--positive u-no-margin--bottom" href="https://juju.is/docs/charm-writing/actions">Learn more about working with actions</a></p>
      </div>
    </div>
  {% endif %}
</div>
{% endblock%}

{% block page_scripts %}
  <script src="{{ versioned_static('js/dist/details.js') }}" defer></script>
  <script src="{{ versioned_static('js/dist/highlight-nav.js') }}" defer></script>
  <script>
   window.addEventListener("DOMContentLoaded", function () {
       charmhub.details.init("{{ package.name }}");
   });
  </script>
{% endblock %}
